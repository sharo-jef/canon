type: Program
children:
  - type: SchemaDirective
    schema: canon::schema
  - type: SchemaDefinition
    children:
      - type: SchemaMember
        children:
          - type: Annotation
            name: description
            value: hoge
          - type: TypeReference
            typeName: data
        name: data1
        isMultiple: false
        dataType: data
      - type: SchemaMember
        children:
          - type: Annotation
            name: description
            value: fuga
          - type: TypeReference
            typeName: data2
        name: data2
        isMultiple: true
        dataType: data2
  - type: StructDefinition
    children:
      - type: StructContent
        children:
          - type: StructMember
            children:
              - type: TypeReference
                typeName: string
            name: datam1
            isOptional: false
            dataType: string
      - type: StructContent
        children:
          - type: StructMember
            children:
              - type: TypeReference
                typeName: string
            name: datam2
            isOptional: true
            dataType: string
    name: data
  - type: StructDefinition
    children:
      - type: StructContent
        children:
          - type: MixinDeclaration
            mixinType: data
      - type: StructContent
        children:
          - type: StructMember
            children:
              - type: TypeReference
                typeName: string
            name: name
            isOptional: false
            dataType: string
    name: data2
  - type: FunctionDefinition
    children:
      - type: ParameterList
        children:
          - type: Parameter
            parameterName: name
            parameterType: string
      - type: TypeReference
        typeName: data2
      - type: FunctionBody
        children:
          - type: ExpressionStatement
            children:
              - type: FunctionCall
                children:
                  - type: Terminal
                    text: apply
                functionName: apply
                hasArguments: false
                argumentCount: 0
          - type: Assignment
            children:
              - type: PrimaryExpression
                children:
                  - type: Terminal
                    text: name
            target: this.name
    name: data2
    isDeclare: false
    returnType: data2
    parameters:
      - name: name
        type: string
  - type: FunctionDefinition
    children:
      - type: TypeReference
        typeName: data2
      - type: FunctionBody
        children:
          - type: ReturnStatement
            children:
              - type: PrimaryExpression
                children:
                  - type: FunctionCall
                    children:
                      - type: Terminal
                        text: data2
                      - type: ArgumentList
                        children:
                          - type: PrimaryExpression
                            children:
                              - type: Literal
                                literalType: string
                                value: generated
                      - type: ConstructionBody
                        children:
                          - type: Assignment
                            children:
                              - type: PrimaryExpression
                                children:
                                  - type: Literal
                                    literalType: string
                                    value: generated1
                            target: datam1
                          - type: Assignment
                            children:
                              - type: PrimaryExpression
                                children:
                                  - type: Literal
                                    literalType: string
                                    value: generated2
                            target: datam2
                    hasArguments: true
                    argumentCount: 1
                    isObjectConstruction: true
                    hasBody: true
    name: generateData3
    isDeclare: false
    returnType: data2
    parameters: []
  - type: StructDefinition
    children:
      - type: StructContent
        children:
          - type: StructMember
            children:
              - type: Annotation
                name: description
                value: The major version number.
              - type: TypeReference
                typeName: int
            name: major
            isOptional: false
            dataType: int
      - type: StructContent
        children:
          - type: StructMember
            children:
              - type: Annotation
                name: description
                value: The minor version number.
              - type: TypeReference
                typeName: int
            name: minor
            isOptional: false
            dataType: int
      - type: StructContent
        children:
          - type: StructMember
            children:
              - type: Annotation
                name: description
                value: The patch version number.
              - type: TypeReference
                typeName: int
            name: patch
            isOptional: false
            dataType: int
      - type: StructContent
        children:
          - type: MethodDefinition
            children:
              - type: Annotation
                name: description
                value: Get version as a string.
              - type: TypeReference
                typeName: string
              - type: FunctionBody
                children:
                  - type: ReturnStatement
                    children:
                      - type: PrimaryExpression
                        children:
                          - type: StringInterpolation
                            children:
                              - type: StringContent
                                children:
                                  - type: InterpolationExpression
                                    children:
                                      - type: PrimaryExpression
                                        children:
                                          - type: MemberAccess
                                            object: this
                                            member: major
                                            fullAccess: this.major
                                  - type: InterpolationExpression
                                    children:
                                      - type: PrimaryExpression
                                        children:
                                          - type: MemberAccess
                                            object: this
                                            member: minor
                                            fullAccess: this.minor
                                  - type: InterpolationExpression
                                    children:
                                      - type: PrimaryExpression
                                        children:
                                          - type: MemberAccess
                                            object: this
                                            member: patch
                                            fullAccess: this.patch
            name: toString
            returnType: string
            parameters: []
    name: version
  - type: FunctionDefinition
    children:
      - type: Annotation
        name: description
        value: Returns the version of the configuration schema.
      - type: TypeReference
        typeName: version
    name: getVersion
    isDeclare: true
    returnType: version
    parameters: []
  - type: FunctionDefinition
    children:
      - type: ParameterList
        children:
          - type: Parameter
            parameterName: version
            parameterType: version
      - type: TypeReference
        typeName: data2
      - type: FunctionBody
        children:
          - type: ReturnStatement
            children:
              - type: PrimaryExpression
                children:
                  - type: FunctionCall
                    children:
                      - type: Terminal
                        text: data2
                      - type: ArgumentList
                        children:
                          - type: PrimaryExpression
                            children:
                              - type: FunctionCall
                                children:
                                  - type: MemberAccess
                                    object: version
                                    member: toString
                                    fullAccess: version.toString
                                isMethodCall: true
                      - type: ConstructionBody
                        children:
                          - type: Assignment
                            children:
                              - type: PrimaryExpression
                                children:
                                  - type: Literal
                                    literalType: string
                                    value: generated1
                            target: datam1
                          - type: Assignment
                            children:
                              - type: PrimaryExpression
                                children:
                                  - type: Literal
                                    literalType: string
                                    value: generated2
                            target: datam2
                    hasArguments: true
                    argumentCount: 1
                    isObjectConstruction: true
                    hasBody: true
    name: generateData4
    isDeclare: false
    returnType: data2
    parameters:
      - name: version
        type: version
